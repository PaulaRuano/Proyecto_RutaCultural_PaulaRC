<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Inicio</title>
	<!-- Google Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Unna:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<!-- Archivo CSS -->		
    <link rel="stylesheet" th:href="@{/css/estilos.css}">	
</head>
<body>
	<!-- Incluir la barra de navegación -->
	<div th:insert="~{fragmentos/nav :: nav}"></div>
	<!-- Contenido principal -->
	   <main class="container my-5">
	       <div class="row">
	           <div class="col-md-6">
	               <!-- Imagen de la ruta -->
				   <img class="img-fluid rounded" th:src="${imagen}" onerror="this.src='/img/ImgComunPI.png'" alt="Imagen de la ruta">
	           </div>
	           <div class="col-md-6">
	               <!-- Detalles de la ruta -->
	               <h1 th:text="${ruta.nombre}">Nombre de la Ruta</h1>
	               <p id="descripcion">Cargando descripción...</p>
	               <ul class="list-group">
	                   <li class="list-group-item">
	                       <strong>Duración:</strong> <span th:text="${ruta.duracion}">0</span> horas
	                   </li>
	                   <li class="list-group-item">
	                       <strong>Distancia:</strong> <span th:text="${ruta.distancia}">0</span> metros
	                   </li>
	                   <li class="list-group-item">
	                       <strong>Tipo:</strong> <span th:text="${ruta.tipo}">T</span>
	                   </li>
	                   <li class="list-group-item">
	                       <strong>Municipio:</strong> <span th:text="${ruta.municipio}">Municipio</span>
	                   </li>
	               </ul>
	           </div>
	       </div>
	   </main>
	   <!-- JavaScript -->
	    <script>
	        // ID de la ruta (usando Thymeleaf para pasarlo al front)
			const rutaId = '[[${ruta.id}]]';

			async function cargarDescripcionRuta() {
			    try {
			        const response = await fetch("/json/RutaDescrip.json");
			        if (!response.ok) {
			            console.error("No se pudo cargar el JSON:", response.status);
			            document.getElementById("descripcion").textContent = "Descripción no disponible.";
			            return;
			        }

			        const descripciones = await response.json();
			        console.log("Descripciones cargadas:", descripciones);

			        // Buscar la descripción correspondiente al ID de la ruta
			        const ruta = descripciones.rutas.find(r => Number(r.id) === Number(rutaId));
			        if (ruta) {
			            document.getElementById("descripcion").textContent = ruta.descripcion;
			        } else {
			            document.getElementById("descripcion").textContent = "Descripción no disponible.";
			        }
			    } catch (error) {
			        console.error("Error cargando descripciones:", error);
			        document.getElementById("descripcion").textContent = "Error cargando la descripción.";
			    }
			}

			cargarDescripcionRuta();
	    </script>
		<div th:insert="~{fragmentos/footer :: footer}"></div>
	 <!-- Bootstrap JS -->
	 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
